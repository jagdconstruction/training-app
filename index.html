<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pre-Employment Training</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.5;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
    }

    .intro {
      margin-bottom: 20px;
      font-size: 1rem;
    }

    .video-wrapper {
      position: relative;
      padding-bottom: 56.25%; /* 16:9 aspect ratio */
      height: 0;
      overflow: hidden;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    .video-wrapper iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

    .notice {
      background: #fff3cd;
      border: 1px solid #ffecb5;
      padding: 12px 16px;
      border-radius: 6px;
      margin-bottom: 20px;
      font-size: 1rem;
      font-weight: 600;
    }

    #ack-section {
      display: none; /* shows only after video completes */
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #f8f9fa;
    }

    .ack-row {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 15px;
    }

    .ack-row input[type="checkbox"] {
      margin-top: 4px;
      transform: scale(1.2);
    }

    #continue-btn {
      padding: 10px 18px;
      font-size: 1rem;
      border-radius: 6px;
      border: none;
      background: #007bff;
      color: #fff;
      cursor: not-allowed;
      opacity: 0.6;
    }

    #continue-btn.enabled {
      cursor: pointer;
      opacity: 1;
    }

    .small-note {
      font-size: 0.85rem;
      color: #666;
      margin-top: 8px;
    }

    .lang-switcher {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-bottom: 10px;
    }

    .lang-btn {
      padding: 6px 12px;
      font-size: 0.9rem;
      border-radius: 4px;
      border: 1px solid #999;
      background: #f0f0f0;
      cursor: pointer;
      font-weight: 600;
    }

    .lang-btn.active {
      background: #007bff;
      color: #fff;
      border-color: #007bff;
    }
  </style>
</head>
<body>
  <!-- Language toggle -->
  <div class="lang-switcher">
    <button class="lang-btn active" data-lang="en">English</button>
    <button class="lang-btn" data-lang="es">Español</button>
  </div>

  <h1 id="page-title">Pre-Employment Training</h1>

  <p class="intro" id="intro-text">
    Welcome to your pre-employment training. Before you can complete and sign your training
    form, you must watch the full training video below and confirm that you understand the
    material.
  </p>

  <div class="notice">
    <span id="notice-heading">IMPORTANT:</span>
    <span id="notice-body">
      You must watch this training video in full before you will be allowed to continue to the application.
    </span>
  </div>

  <!-- YouTube video -->
  <div class="video-wrapper">
    <div id="player"></div>
  </div>

  <!-- Section shown only after video fully watched -->
  <div id="ack-section">
    <h2 id="ack-heading">Training Acknowledgment</h2>

    <div class="ack-row">
      <input type="checkbox" id="ack-checkbox" />
      <label for="ack-checkbox" id="ack-label">
        I confirm that I have watched the entire training video and understand the information
        presented. I acknowledge that this training is a condition of starting work.
      </label>
    </div>

    <button id="continue-btn" disabled>
      Continue to Training Form
    </button>

    <p class="small-note" id="small-note">
      By clicking “Continue to Training Form,” you will be redirected to the training
      documentation that you must review and sign.
    </p>
  </div>

  <!-- YouTube API -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    var player;
    var videoFinished = false;

    const translations = {
      en: {
        htmlLang: "en",
        titleTag: "Pre-Employment Training",
        pageTitle: "Pre-Employment Training",
        introText:
          "Welcome to your pre-employment training. Before you can complete and sign your training form, you must watch the full training video below and confirm that you understand the material.",
        noticeHeading: "IMPORTANT:",
        noticeBody:
          "You must watch this training video in full before you will be allowed to continue to the application.",
        ackHeading: "Training Acknowledgment",
        ackLabel:
          "I confirm that I have watched the entire training video and understand the information presented. I acknowledge that this training is a condition of starting work.",
        continueBtn: "Continue to Training Form",
        smallNote:
          "By clicking “Continue to Training Form,” you will be redirected to the training documentation that you must review and sign."
      },
      es: {
        htmlLang: "es",
        titleTag: "Capacitación Previa al Empleo",
        pageTitle: "Capacitación Previa al Empleo",
        introText:
          "Bienvenido a su capacitación previa al empleo. Antes de poder completar y firmar su formulario de capacitación, debe ver el video completo a continuación y confirmar que comprende el material.",
        noticeHeading: "IMPORTANTE:",
        noticeBody:
          "Debe ver este video de capacitación completo antes de que se le permita continuar con la solicitud.",
        ackHeading: "Reconocimiento de Capacitación",
        ackLabel:
          "Confirmo que he visto el video de capacitación completo y entiendo la información presentada. Reconozco que esta capacitación es una condición para comenzar a trabajar.",
        continueBtn: "Continuar al Formulario de Capacitación",
        smallNote:
          "Al hacer clic en «Continuar al Formulario de Capacitación», será redirigido a la documentación que debe revisar y firmar."
      }
    };

    function setLanguage(lang) {
      const t = translations[lang];

      document.documentElement.lang = t.htmlLang;
      document.title = t.titleTag;

      document.getElementById("page-title").textContent = t.pageTitle;
      document.getElementById("intro-text").textContent = t.introText;
      document.getElementById("notice-heading").textContent = t.noticeHeading;
      document.getElementById("notice-body").textContent = " " + t.noticeBody;
      document.getElementById("ack-heading").textContent = t.ackHeading;
      document.getElementById("ack-label").textContent = t.ackLabel;
      document.getElementById("continue-btn").textContent = t.continueBtn;
      document.getElementById("small-note").textContent = t.smallNote;

      document.querySelectorAll(".lang-btn").forEach((btn) => {
        btn.classList.toggle("active", btn.dataset.lang === lang);
      });
    }

    // YouTube player
    function onYouTubeIframeAPIReady() {
      player = new YT.Player("player", {
        videoId: "fGFDnc4VP18",
        playerVars: {
          rel: 0,
          modestbranding: 1
        },
        events: {
          onStateChange: onPlayerStateChange
        }
      });
    }

    function onPlayerStateChange(event) {
      if (event.data === YT.PlayerState.ENDED) {
        videoFinished = true;
        document.getElementById("ack-section").style.display = "block";
        document.getElementById("ack-section").scrollIntoView({ behavior: "smooth" });
      }
    }

    document.addEventListener("DOMContentLoaded", function () {
      const ackCheckbox = document.getElementById("ack-checkbox");
      const continueBtn = document.getElementById("continue-btn");

      // Default language
      setLanguage("en");

      // Language toggle logic
      document.querySelectorAll(".lang-btn").forEach((btn) => {
        btn.addEventListener("click", () => setLanguage(btn.dataset.lang));
      });

      ackCheckbox.addEventListener("change", function () {
        if (ackCheckbox.checked && videoFinished) {
          continueBtn.disabled = false;
          continueBtn.classList.add("enabled");
        } else {
          continueBtn.disabled = true;
          continueBtn.classList.remove("enabled");
        }
      });

      continueBtn.addEventListener("click", function () {
        if (!continueBtn.disabled) {
          window.location.href =
            "https://na2.documents.adobe.com/public/esignWidget?wid=CBFCIBAA3AAABLblqZhBaK_l5Wopm430r1HwIRPnxP8nj-zbKyAsAoqj19EPGbQ6qXlgWD1IspW25_ypXqgI*";
        }
      });
    });
  </script>
</body>
</html>
